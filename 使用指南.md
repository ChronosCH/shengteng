# 增强版CE-CSL手语识别系统使用指南

## 快速开始

### 1. 启动系统

#### Windows用户
```bash
# 双击运行启动脚本
start_enhanced_server.bat
```

#### Linux/Mac用户
```bash
# 运行启动脚本
chmod +x start_enhanced_cecsl.sh
./start_enhanced_cecsl.sh
```

#### 手动启动
```bash
# 激活环境
conda activate shengteng

# 启动服务
python simple_enhanced_server.py
```

### 2. 打开测试页面

在浏览器中访问：
```
file:///your-project-path/frontend/enhanced-cecsl-test.html
```

或直接打开文件：`frontend/enhanced-cecsl-test.html`

## 功能说明

### 🔍 服务状态检查
- 页面加载时自动检查服务状态
- 显示模型加载状态和词汇表大小
- 实时更新统计信息

### 🎥 视频手语识别
1. **上传视频**
   - 支持格式：MP4, AVI, MOV, MKV, WEBM
   - 文件大小限制：100MB
   - 支持拖拽上传

2. **处理流程**
   - 文件上传 (30%)
   - 关键点提取 (40%)
   - 模型推理 (30%)

3. **查看结果**
   - 识别文本
   - 置信度百分比
   - 手语序列
   - 处理时间

### 🧪 模型测试
- **单次测试**：生成随机关键点数据进行预测
- **批量测试**：执行5次连续测试
- **自定义测试**：指定帧数生成测试数据

### 📈 测试历史
- 自动保存测试结果
- 显示最近10次测试
- 包含时间、结果、置信度等信息

## API接口

### 基础信息
- **服务地址**：http://localhost:8001
- **API前缀**：/api

### 主要接口

#### 1. 健康检查
```http
GET /api/health
```

#### 2. 服务统计
```http
GET /api/enhanced-cecsl/stats
```

#### 3. 模型测试
```http
POST /api/enhanced-cecsl/test
Content-Type: application/json

{
    "landmarks": [[0.1, 0.2, 0.3, ...], ...],
    "description": "测试描述"
}
```

#### 4. 视频上传
```http
POST /api/enhanced-cecsl/upload-video
Content-Type: multipart/form-data

file: 视频文件
```

#### 5. 查询处理状态
```http
GET /api/enhanced-cecsl/video-status/{task_id}
```

## 系统要求

### 环境依赖
- Python 3.11+
- Conda/Miniconda
- 现代浏览器（Chrome、Firefox、Edge等）

### Python包
```
fastapi>=0.104.1
uvicorn[standard]>=0.24.0
numpy>=1.24.3
pydantic>=2.5.0
python-multipart>=0.0.6
```

### 硬件要求
- 内存：至少4GB
- 存储：至少1GB可用空间
- 网络：本地环回接口

## 故障排除

### 常见问题

#### 1. 服务启动失败
```bash
# 检查端口占用
netstat -an | grep 8001

# 更换端口
python simple_enhanced_server.py --port 8002
```

#### 2. 页面无法连接服务
- 确认服务已启动
- 检查防火墙设置
- 验证端口号是否正确

#### 3. 视频上传失败
- 检查文件格式是否支持
- 确认文件大小不超过100MB
- 验证网络连接状态

#### 4. 识别结果异常
- 当前使用模拟模式，结果为随机生成
- 真实模型需要集成MindSpore和MediaPipe

### 日志查看
```bash
# 查看服务日志
tail -f logs/service.log

# 查看错误日志
tail -f logs/error.log
```

## 开发说明

### 项目结构
```
├── simple_enhanced_server.py     # 简化版服务器
├── frontend/
│   ├── enhanced-cecsl-test.html  # 测试页面
│   └── src/                      # React组件源码
├── training/
│   └── output/                   # 模型文件
├── temp/
│   └── video_uploads/            # 临时上传目录
└── logs/                         # 日志目录
```

### 配置修改
- 端口配置：修改`simple_enhanced_server.py`中的端口号
- 上传限制：调整文件大小和格式限制
- 词汇表：替换`training/output/enhanced_vocab.json`

### 扩展开发
- 添加新的API接口
- 集成真实的模型推理
- 优化前端用户界面
- 增加更多测试功能

## 技术支持

如有问题，请检查：
1. 环境配置是否正确
2. 依赖包是否完整安装
3. 端口是否被占用
4. 防火墙设置是否阻止访问

---

**享受手语识别的乐趣！** 🎉
